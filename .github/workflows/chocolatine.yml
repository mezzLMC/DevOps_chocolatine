name: chocolatine

on:
  push:
    branches-ignore:
    - "ga-ignore-*"
  pull_request:
    branches-ignore:
    - "ga-ignore-*"

env:
    MIRROR_URL: "git@github.com:EpitechPromo2027/B-DOP-200-STG-2-1-chocolatine-mohamed.mazouz.git"
    EXECUTABLES: "mysh"

jobs:
    check_coding_style:
        name: check coding style
        runs-on: ubuntu-latest
        container:
            image: ghcr.io/epitech/coding-style-checker:latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: get coding-style errors
              id: check_coding_style
              run: |
                check.sh $(pwd) $(pwd)
                echo "lol"
                echo "::warning file=app.js,line=1,col=5,endColumn=7::Missing semicolon"
                while read ERROR; do
                  array=(`echo $ERROR | sed 's/:/\n/g'`)
                  echo "::error file=${array[1]#./},title=${array[3]#./} coding style errors detected: ${array[2]#./}::${array[4]#./}"
                done < coding-style-reports.log
                
        
        
